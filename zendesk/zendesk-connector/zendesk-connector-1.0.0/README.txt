Product: Integration tests for WSO2 ESB Zendesk connector
==================================================================

Pre-requisites:

 - Maven 3.x
 - Java 1.6 or above
 - The org.wso2.esb.integration.integration-base project is required. The test suite has been configured to download this project automatically. If the automatic download fails, download the following project and compile it using the mvn clean install command to update your local repository:
   https://github.com/wso2-dev/esb-connectors/tree/master/integration-base

Tested Platform:

 - Microsoft WINDOWS V-7
 - UBUNTU 13.04
 - WSO2 ESB 4.8.1

STEPS:

			    
 1. Create a Zendesk account and get user credentials according to below steps:

	i)  Navigate to URL "https://www.zendesk.com/register#company" and create a trial account. 
	    (Save the given username[email address], password and url[generated by API] for future use.)

	ii) Once you registered it automatically navigates to "https://{company}.zendesk.com/agent/#/launchpad/configureEmail".

	iii) When you send the request you have to save username, password and API URL generated in step (i).    

	
  2. Follow the below mentioned steps for adding valid certificate to access Zendesk API over https

	i) Extract the certificate from browser by navigating to apiUrl[Step 1->(iii)] and place the certificate file in following location.
	   "{ZENDESK_CONNECTOR_HOME}/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector/src/test/resources/keystores/products/"
	  
	ii) Navigate to "{ZENDESK_CONNECTOR_HOME}/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector/src/test/resources/keystores/products/" using command prompt and execute keytool -importcert -file CERT_FILE_NAME -keystore wso2carbon.jks -alias "CERT_NAME" in command line to import Zendesk certificate in to keystore. Give "wso2carbon" as password.
		NOTE : CERT_FILE_NAME is the file name which was extracted from zendesk, change it accordingly. (e.g. -.zendesk.com)
			   CERT_NAME is name of the certificate. (e.g. zendesk)
	   
	iii) Go to new ESB 4.8.1 folder and place the downloaded certificate in "<ESB_HOME>/repository/resources/security/"

	iv) Navigate to "<ESB_HOME>/repository/resources/security/" using command prompt and execute keytool -importcert -file CERT_FILE_NAME -keystore client-truststore.jks -alias "CERT_NAME" in command line to import Zendesk certificate in to keystore. Give "wso2carbon" as password.
		NOTE : CERT_FILE_NAME is the file name which was extracted from zendesk, change it accordingly. (e.g. -.zendesk.com)
			   CERT_NAME is name of the certificate. (e.g. zendesk)
	
  3. Create and add a zip file of ESB 4.8.1 with applied keystores in step 2->(iii) and latest patches to the location: "{ZENDESK_CONNECTOR_HOME}/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector/repository/"

  4. Update the 'zendesk.properties' file at the location "{ZENDESK_CONNECTOR_HOME}/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector/src/test/resources/artifacts/ESB/connector/config/" as below.
   	 - apiUrl=Use the api url you got from step 1->(iii)
	 - username=Use the username you got from step 1->(iii)
	 - password=Use the password you got from step 1->(iii)
	 
  5. Change the query parameter in the zendesk.properties for a proper search in your created account.

  6.Make sure that the zendesk connector is set as a module in esb-connectors parent pom.
            <module>zendesk/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector</module>

  7. Navigate to "{ZENDESK_CONNECTOR_HOME}/zendesk-connector/zendesk-connector-1.0.0/org.wso2.carbon.connector/" and run the following command.
      	$ mvn clean install